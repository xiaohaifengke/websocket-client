{"version":3,"sources":["webpack://WS/webpack/bootstrap","webpack://WS/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://WS/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://WS/./node_modules/@babel/runtime/helpers/createClass.js","webpack://WS/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://WS/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://WS/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://WS/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://WS/./src/heartbeat.js","webpack://WS/./src/index.js","webpack://WS/./src/util/events.js","webpack://WS/./src/util/index.js","webpack://WS/./src/util/time.js"],"names":["Heartbeat","ws","options","defaultOptions","message","period","checkIntervalId","setInterval","send","clearInterval","stopCheck","check","connectImmediately","enableDefaultEventHandler","connectLogSilent","eventLogSilent","maxReconnectTimes","reconnectTimeInterval","immediateReconnectTimeInterval","enableMessageCache","heartbeatPeriod","heartbeatMessage","heartbeatLogSilent","WebSocketClient","url","$options","wasClean","reconnectTimes","_messageCache","createWebSocket","heartbeat","_init","window","readyState","undefined","WebSocket","CLOSED","initEventsHandler","console","log","times","interval","setTimeout","t","error","addEventListener","getTime","recheck","sendCachedMessage","event","data","JSON","parse","isPlainObject","eventName","trigger","reconnectWebSocket","index","indexOf","push","length","msg","shift","cacheMessage","CONNECTING","OPEN","splice","Blob","ArrayBuffer","isArrayBufferView","stringify","args","close","Object","defineProperties","enumerable","get","status","constructor","STATUS","onopen","set","fn","onmessage","onclose","onerror","func","_events","create","Array","isArray","i","l","on","$this","once","off","apply","arguments","cbs","cb","res","isPromise","_handled","catch","e","EventHub","_toString","prototype","toString","obj","call","p","then","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","d","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds","f","num"],"mappings":"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","file":"websocket-client.dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","export class Heartbeat {\r\n  constructor (ws, options = {}) {\r\n    const defaultOptions = {\r\n      message: 'ping',\r\n      period: 50000\r\n    }\r\n    this.ws = ws\r\n    this.options = { ...defaultOptions, ...options }\r\n    this.checkIntervalId = null\r\n  }\r\n\r\n  check () {\r\n    this.checkIntervalId = setInterval(() => {\r\n      this.ws.send(this.options.message)\r\n    }, this.options.period)\r\n  }\r\n\r\n  stopCheck () {\r\n    clearInterval(this.checkIntervalId)\r\n    this.checkIntervalId = null\r\n  }\r\n\r\n  recheck () {\r\n    this.stopCheck()\r\n    this.check()\r\n  }\r\n}\r\n","import { Heartbeat } from './heartbeat'\nimport { isPromise, getTime, isArrayBufferView, isPlainObject } from './util'\n\nconst defaultOptions = {\n  connectImmediately: true,\n  enableDefaultEventHandler: true,\n  connectLogSilent: false,\n  eventLogSilent: false,\n  maxReconnectTimes: 3,\n  reconnectTimeInterval: 30000,\n  immediateReconnectTimeInterval: 2000,\n  enableMessageCache: false,\n  message: 'message',\n  heartbeatPeriod: 50000,\n  heartbeatMessage: 'ping',\n  heartbeatLogSilent: false\n}\n\nexport class WebSocketClient {\n  static STATUS = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED']\n\n  /**\n   * WebSocketClient constructor\n   * @param { string }  url\n   * @param { object | undefined }  options\n   */\n  constructor (url, options = {}) {\n    this.url = url\n    this.options = options\n    this.defaultOptions = { ...defaultOptions }\n    this.$options = { ...this.defaultOptions, ...options }\n    this.wasClean = null // Boolean. 是否正常断开。一般异常断开时，该值为false\n    this.reconnectTimes = 0 // 第n次重连的flag\n    this._messageCache = []\n    if (this.$options.connectImmediately) this.createWebSocket()\n    this.heartbeat = new Heartbeat(this, {\n      message: this.$options.heartbeatMessage,\n      period: this.$options.heartbeatPeriod\n    })\n    this._init()\n  }\n\n  createWebSocket () {\n    if ('WebSocket' in window) {\n      if (this.readyState === undefined || this.readyState === WebSocket.CLOSED) {\n        this.ws = new WebSocket(this.url)\n        if (this.$options.enableDefaultEventHandler) this.initEventsHandler()\n      }\n    } else {\n      console.log('WebSocket is not supported in your browser!')\n    }\n  }\n\n  reconnectWebSocket (times = 0, interval = this.$options.reconnectTimeInterval) {\n    if (times < this.$options.maxReconnectTimes) {\n      if (!this.$options.connectLogSilent) {\n        console.log(`Try to reconnect the WebSocket after ${interval / 1000} seconds.`)\n      }\n      setTimeout(\n        t => {\n          if (!this.$options.connectLogSilent) {\n            console.log(`${t + 1}th attempt to reconnect to webSocket server.`)\n          }\n          this.reconnectTimes++\n          this.createWebSocket()\n        },\n        interval,\n        times\n      )\n    } else {\n      if (!this.$options.connectLogSilent) {\n        console.error(\n          `Could not create connection to websocket server. Attempted reconnect ${this.$options.maxReconnectTimes} times. Giving up!`\n        )\n      }\n    }\n  }\n\n  initEventsHandler () {\n    this.ws.addEventListener('open', () => {\n      if (!this.$options.eventLogSilent) {\n        console.log(`The Websocket has opened at ${getTime()}.`)\n      }\n      this.wasClean = null\n      this.reconnectTimes = 0\n      this.heartbeat.recheck()\n      this.sendCachedMessage()\n    })\n    this.ws.addEventListener('message', event => {\n      this.heartbeat.recheck()\n      const data = JSON.parse(event.data)\n      if (isPlainObject(data)) {\n        const message = this.$options.message\n        const eventName = data[message]\n        eventName && typeof eventName === 'string' && this.trigger(eventName, data)\n      }\n    })\n    this.ws.addEventListener('close', event => {\n      this.wasClean = !!event.wasClean\n      if (this.wasClean) {\n        if (!this.$options.eventLogSilent) {\n          console.log(`The WebSocket connection has been closed normally at ${getTime()}.`, event)\n        }\n      } else {\n        if (!this.$options.eventLogSilent) {\n          console.error(`closed at ${getTime()}.`, event)\n        }\n        this.reconnectWebSocket(\n          this.reconnectTimes,\n          this.reconnectTimes > 0\n            ? this.$options.reconnectTimeInterval\n            : this.$options.immediateReconnectTimeInterval\n        )\n      }\n      this.heartbeat.stopCheck()\n    })\n    this.ws.addEventListener('error', error => {\n      if (!this.$options.eventLogSilent) {\n        console.error(\n          `The WebSocket connection has been closed due to an error at ${getTime()}.`,\n          error\n        )\n      }\n    })\n  }\n\n  cacheMessage (message) {\n    const index = this._messageCache.indexOf(message)\n    if (index === -1) {\n      this._messageCache.push(message)\n    }\n  }\n\n  sendCachedMessage () {\n    if (this._messageCache.length === 0) return\n    const msg = this._messageCache.shift()\n    this.send(msg)\n    setTimeout(() => {\n      this.sendCachedMessage()\n    }, 100)\n  }\n\n  /**\n   * 1. 判断当前websocket的连接状态为OPEN状态时发送消息\n   * 2. TODO: 当非OPEN状态时，判断是否为正常断开。只有当websocket为异常断开时，才存储信息\n   * 3. FIXME: 某些早期浏览器不支持readyState属性，故该方法内的逻辑应该添加相应的判断\n   * @param { object } message\n   */\n  send (message) {\n    switch (this.readyState) {\n      case undefined: {\n\n        /**\n         * WebSocket is not instantiated. Store the message to the messageCache\n         * and send it after the WebSocket open. Then invoke the createWebSocket method.\n         *\n         */\n        if (message !== this.$options.heartbeatMessage && this.$options.enableMessageCache) {\n          this.cacheMessage(message)\n        }\n        this.createWebSocket()\n        break\n      }\n      case WebSocket.CONNECTING: {\n\n        /**\n         * WebSocket is connecting. Store the message to the messageCache\n         * and send it after the WebSocket open.\n         *\n         */\n        if (message !== this.$options.heartbeatMessage && this.$options.enableMessageCache) {\n          this.cacheMessage(message)\n        }\n        break\n      }\n\n      case WebSocket.OPEN: {\n        // WebSocket is connected and send the message directly.\n        if (message === this.$options.heartbeatMessage) {\n          console.log(`Heartbeat check at ${getTime()}.`)\n          break\n        }\n\n        const index = this._messageCache.indexOf(message)\n        if (index !== -1) {\n          // 如果该msg在messageCache内，则从messageCache中删除该msg\n          this._messageCache.splice(index, 1)\n        }\n        if (\n          message instanceof Blob ||\n          message instanceof ArrayBuffer ||\n          isArrayBufferView(message)\n        ) {\n          this.ws.send(message)\n        } else {\n          this.ws.send(JSON.stringify(message))\n        }\n        break\n      }\n      default: {\n\n        /**\n         * TODO: Do not store the message if this.wasClean is true\n         * Store the message to the messageCache\n         * and send it after the WebSocket is reconnected.\n         */\n        if (message !== this.$options.heartbeatMessage && this.$options.enableMessageCache) {\n          this.cacheMessage(message)\n        }\n      }\n    }\n  }\n\n  /**\n   * TODO:\n   * It may be helpful to examine the socket's bufferedAmount attribute before attempting to\n   * close the connection to determine if any data has yet to be transmitted on the network.\n   * If this value isn't 0, there's pending data still, so you may wish to wait before closing the connection.\n   */\n  close (...args) {\n    this.ws?.close(...args)\n  }\n\n  _init () {\n    Object.defineProperties(this, {\n      readyState: {\n        enumerable: true,\n        get: function () {\n          return this.ws?.readyState\n        }\n      },\n      status: {\n        enumerable: true,\n        get: function () {\n          return this.readyState >= 0 ? this.constructor.STATUS[this.readyState] : 'UNCREATE'\n        }\n      },\n      onopen: {\n        enumerable: true,\n        get: function () {\n          return this.ws?.onopen\n        },\n        set: function (fn) {\n          this.ws && (this.ws.onopen = fn)\n        }\n      },\n      onmessage: {\n        enumerable: true,\n        get: function () {\n          return this.ws?.onmessage\n        },\n        set: function (fn) {\n          this.ws && (this.ws.onmessage = fn)\n        }\n      },\n      onclose: {\n        enumerable: true,\n        get: function () {\n          return this.ws?.onclose\n        },\n        set: function (fn) {\n          this.ws && (this.ws.onclose = fn)\n        }\n      },\n      onerror: {\n        enumerable: true,\n        get: function () {\n          return this.ws?.onerror\n        },\n        set: function (fn) {\n          this.ws && (this.ws.onerror = fn)\n        }\n      }\n    })\n  }\n\n  on (event, func) {\n    if (!this._events) this._events = Object.create(null)\n    if (Array.isArray(event)) {\n      for (let i = 0, l = event.length; i < l; i++) {\n        this.on(event[i], func)\n      }\n    } else {\n      ;(this._events[event] || (this._events[event] = [])).push(func)\n    }\n    return this\n  }\n\n  once (event, func) {\n    const $this = this\n\n    function once () {\n      $this.off(event, once)\n      func.apply($this, arguments)\n    }\n\n    once.func = func\n    this.on(event, once)\n    return this\n  }\n\n  off (event, func) {\n    // all\n    if (!arguments.length) {\n      this._events = Object.create(null)\n      return this\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (let i = 0, l = event.length; i < l; i++) {\n        this.off(event[i], func)\n      }\n      return this\n    }\n    // specific event\n    const cbs = this._events[event]\n    if (!cbs) {\n      return this\n    }\n    if (!func) {\n      this._events[event] = null\n      return this\n    }\n    // specific handler\n    let cb\n    let i = cbs.length\n    while (i--) {\n      cb = cbs[i]\n      if (cb === func || cb.func === func) {\n        cbs.splice(i, 1)\n        break\n      }\n    }\n    return this\n  }\n\n  trigger (event, ...args) {\n    let cbs = this._events[event]\n    if (cbs) {\n      cbs = [...cbs]\n      let res\n      for (let i = 0, l = cbs.length; i < l; i++) {\n        try {\n          res = cbs[i].apply(this, args)\n          if (res && isPromise(res) && !res._handled) {\n            res.catch(e => console.error(e))\n            res._handled = true\n          }\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    }\n    return this\n  }\n}\n\nexport { Heartbeat }\nexport { EventHub } from './util'\nexport default WebSocketClient\n","import { isPromise } from './index'\r\n\r\nexport class EventHub {\r\n  on (event, func) {\r\n    if (!this._events) this._events = Object.create(null)\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        this.on(event[i], func)\r\n      }\r\n    } else {\r\n      ;(this._events[event] || (this._events[event] = [])).push(func)\r\n    }\r\n    return this\r\n  }\r\n\r\n  once (event, func) {\r\n    const $this = this\r\n\r\n    function once () {\r\n      $this.off(event, once)\r\n      func.apply($this, arguments)\r\n    }\r\n\r\n    once.func = func\r\n    this.on(event, once)\r\n    return this\r\n  }\r\n\r\n  off (event, func) {\r\n    // all\r\n    if (!arguments.length) {\r\n      this._events = Object.create(null)\r\n      return this\r\n    }\r\n    // array of events\r\n    if (Array.isArray(event)) {\r\n      for (let i = 0, l = event.length; i < l; i++) {\r\n        this.off(event[i], func)\r\n      }\r\n      return this\r\n    }\r\n    // specific event\r\n    const cbs = this._events[event]\r\n    if (!cbs) {\r\n      return this\r\n    }\r\n    if (!func) {\r\n      this._events[event] = null\r\n      return this\r\n    }\r\n    // specific handler\r\n    let cb\r\n    let i = cbs.length\r\n    while (i--) {\r\n      cb = cbs[i]\r\n      if (cb === func || cb.func === func) {\r\n        cbs.splice(i, 1)\r\n        break\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  trigger (event, ...args) {\r\n    let cbs = this._events[event]\r\n    if (cbs) {\r\n      cbs = [...cbs]\r\n      let res\r\n      for (let i = 0, l = cbs.length; i < l; i++) {\r\n        try {\r\n          res = cbs[i].apply(this, args)\r\n          if (res && isPromise(res) && !res._handled) {\r\n            res.catch(e => console.error(e))\r\n            res._handled = true\r\n          }\r\n        } catch (e) {\r\n          console.error(e)\r\n        }\r\n      }\r\n    }\r\n    return this\r\n  }\r\n}\r\n","export * from './events'\r\nexport * from './time'\r\n\r\n/**\r\n * Get the raw type string of a value, e.g., [object Object].\r\n */\r\nconst _toString = Object.prototype.toString\r\n\r\n/**\r\n * Strict object type check. Only returns true\r\n * for plain JavaScript objects.\r\n */\r\nexport function isPlainObject (obj) {\r\n  return _toString.call(obj) === '[object Object]'\r\n}\r\n\r\nexport function isPromise (p) {\r\n  return (\r\n    p !== undefined && p !== null && typeof p.then === 'function' && typeof p.catch === 'function'\r\n  )\r\n}\r\n\r\nexport function isArrayBufferView (obj) {\r\n  return (\r\n    obj instanceof Int8Array ||\r\n    obj instanceof Uint8Array ||\r\n    obj instanceof Uint8ClampedArray ||\r\n    obj instanceof Int16Array ||\r\n    obj instanceof Uint16Array ||\r\n    obj instanceof Int32Array ||\r\n    obj instanceof Uint32Array ||\r\n    obj instanceof Float32Array ||\r\n    obj instanceof Float64Array ||\r\n    obj instanceof DataView\r\n  )\r\n}\r\n","export function getTime () {\r\n  const d = new Date()\r\n  const year = d.getFullYear()\r\n  const month = d.getMonth() + 1\r\n  const date = d.getDate()\r\n  const hour = d.getHours()\r\n  const minute = d.getMinutes()\r\n  const second = d.getSeconds()\r\n  return `${year}-${f(month)}-${f(date)} ${f(hour)}:${f(minute)}:${f(second)}`\r\n\r\n  function f (num) {\r\n    return num > 9 ? num : '0' + num\r\n  }\r\n}\r\n"],"sourceRoot":""}